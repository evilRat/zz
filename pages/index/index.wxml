<view class="container">
  <!-- 顶部股票/基金选择器 -->
  <scroll-view class="stock-selector" scroll-x="true">
    <view class="stock-item {{currentStock === 'all' ? 'active' : ''}}" data-stock="all" bindtap="selectStock">全部</view>
    <view wx:for="{{stocks}}" wx:key="id" class="stock-item {{currentStock === item.code ? 'active' : ''}}" data-stock="{{item.code}}" bindtap="selectStock">
      {{item.name}}({{item.code}})
    </view>
  </scroll-view>

  <!-- 交易记录列表 -->
  <view class="trade-list">
    <view class="trade-header">
      <text>交易记录</text>
      <text>详情</text>
    </view>
    
    <view wx:if="{{trades.length === 0}}" class="empty-state">
      <view class="empty-icon">📊</view>
      <view>暂无交易记录</view>
      <view class="empty-hint">点击右下角按钮添加第一条记录</view>
    </view>
    
    <view wx:for="{{trades}}" wx:key="id" class="trade-item {{item.type}}" data-id="{{item.id}}" bindtap="goToDetail">
      <view class="trade-row">
        <view>
          <text class="stock-info">{{item.stockName}}</text>
          <view class="trade-info-row">
            <text class="trade-type trade-{{item.type}}">{{item.type === 'buy' ? '买入' : '卖出'}}</text>
            <text class="market-badge">{{item.market}}</text>
          </view>
        </view>
        <view class="trade-date-container">
          <text class="trade-date">{{item.date}}</text>
        </view>
      </view>
      
      <view class="trade-details">
        <view class="detail-item">
          <text class="detail-label">价格</text>
          <text class="detail-value">¥{{item.price}}</text>
        </view>
        
        <view class="detail-item">
          <text class="detail-label">数量</text>
          <text class="detail-value">{{item.quantity}}</text>
        </view>
        
        <view class="detail-item">
          <text class="detail-label">金额</text>
          <text class="detail-value detail-amount">¥{{item.amount}}</text>
        </view>
      </view>
      
      <view class="trade-footer">
        <view>
          <text class="detail-label">未匹配: </text>
          <text class="detail-value">{{item.remainingQuantity || item.quantity}}</text>
        </view>
        <view wx:if="{{item.profit !== undefined}}">
          <text class="detail-label">本次盈亏: </text>
          <text class="detail-value {{item.profit >= 0 ? 'profit-positive' : 'profit-negative'}}">
            ¥{{item.profit}}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- 添加按钮 -->
  <view class="add-button" bindtap="goToAddTrade"></view>
</view>